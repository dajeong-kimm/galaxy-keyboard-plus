<textarea
  id="input"
  rows="6"
  cols="80"
  placeholder="Î™ÖÎ†πÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."
></textarea>
<br />
<input
  type="text"
  id="projectPath"
  readonly
  placeholder="ÌÉêÏÉâÌï† ÌîÑÎ°úÏ†ùÌä∏ Í≤ΩÎ°ú"
  style="width: 500px"
/>
<button onclick="selectFolder()">Ìè¥Îçî ÏÑ†ÌÉù</button>
<button onclick="run()">Ïã§Ìñâ</button>
<pre id="output"></pre>

<script>
  async function selectFolder() {
    const selected = await window.api.selectProjectFolder();
    if (selected) {
      document.getElementById('projectPath').value = selected;
    }
  }
  let logLines = [];

  window.api.onProgress((msg) => {
    logLines.push(msg);
    document.getElementById('output').textContent = logLines.join('\n');
  });

  async function run() {
    logLines = ['üöÄ Running...'];
    document.getElementById('output').textContent = logLines.join('\n');

    const input = document.getElementById('input').value;
    const path = document.getElementById('projectPath').value;
    if (!path) {
      alert('Please select a project path first.');
      return;
    }

    const result = await window.api.sendCommand({
      command: input,
      projectPath: path,
    });

    if (result.error) {
      logLines.push('‚ùå Error: ' + result.error);
    } else if (result.result) {
      logLines.push('‚úÖ Result:');
      logLines.push(
        typeof result.result === 'object'
          ? JSON.stringify(result.result, null, 2)
          : String(result.result)
      );
    } else {
      logLines.push('‚ÑπÔ∏è No result returned.');
    }

    document.getElementById('output').textContent = logLines.join('\n');
  }
</script>
